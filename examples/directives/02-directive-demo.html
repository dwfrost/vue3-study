<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¬¬9ç« ï¼šVue3æŒ‡ä»¤ç³»ç»Ÿæ¼”ç¤º</title>
    <script src="https://unpkg.com/vue@next"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .section {
            margin-bottom: 40px;
            padding: 20px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            background: #fafafa;
        }
        
        .section h3 {
            margin-top: 0;
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        
        .demo-item {
            margin: 15px 0;
            padding: 15px;
            background: white;
            border-radius: 5px;
            border-left: 4px solid #3498db;
        }
        
        .btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        
        .btn:hover {
            background: #2980b9;
        }
        
        .btn-danger {
            background: #e74c3c;
        }
        
        .btn-danger:hover {
            background: #c0392b;
        }
        
        .input-field {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin: 5px;
            font-size: 14px;
        }
        
        .loading-container {
            position: relative;
            min-height: 120px;
            background: #ecf0f1;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 10px 0;
        }
        
        .loading-mask {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.8);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
        }
        
        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        .loading-text {
            margin-top: 10px;
            color: #666;
            font-size: 14px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .draggable-item {
            display: inline-block;
            padding: 15px 25px;
            background: #3498db;
            color: white;
            border-radius: 6px;
            cursor: grab;
            user-select: none;
            margin: 10px;
            position: relative;
        }
        
        .draggable-item:active {
            cursor: grabbing;
        }
        
        .permission-demo {
            padding: 10px;
            margin: 5px;
            background: #e8f5e8;
            border: 1px solid #4caf50;
            border-radius: 4px;
        }
        
        .code-block {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            margin: 10px 0;
            overflow-x: auto;
        }
        
        .highlight {
            background: #f39c12;
            color: white;
            padding: 2px 4px;
            border-radius: 2px;
        }
        
        .status {
            padding: 8px 12px;
            border-radius: 4px;
            margin: 5px 0;
            font-weight: bold;
        }
        
        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .status.info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #b8daff;
        }
        
        .grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        @media (max-width: 768px) {
            .grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div id="app">
        <div class="container">
            <h1>ğŸš€ Vue3æŒ‡ä»¤ç³»ç»Ÿå®Œæ•´æ¼”ç¤º</h1>
            <p>æœ¬æ¼”ç¤ºå±•ç¤ºäº†Vue3æŒ‡ä»¤ç³»ç»Ÿçš„æ ¸å¿ƒç‰¹æ€§ï¼ŒåŒ…æ‹¬å†…ç½®æŒ‡ä»¤çš„ä½¿ç”¨å’Œè‡ªå®šä¹‰æŒ‡ä»¤çš„å¼€å‘ã€‚</p>
            
            <!-- 1. æ¡ä»¶æ¸²æŸ“æŒ‡ä»¤ -->
            <div class="section">
                <h3>1. æ¡ä»¶æ¸²æŸ“æŒ‡ä»¤ (v-if / v-show)</h3>
                
                <div class="demo-item">
                    <h4>v-if æ¼”ç¤º</h4>
                    <button class="btn" @click="toggleShow">
                        {{ showContent ? 'éšè—å†…å®¹' : 'æ˜¾ç¤ºå†…å®¹' }}
                    </button>
                    <div v-if="showContent" class="status success">
                        âœ… è¿™æ˜¯é€šè¿‡ v-if æ§åˆ¶çš„å†…å®¹ (DOMä¸­å­˜åœ¨/ä¸å­˜åœ¨)
                    </div>
                    <div class="code-block">
&lt;div v-if="showContent"&gt;å†…å®¹&lt;/div&gt;
                    </div>
                </div>
                
                <div class="demo-item">
                    <h4>v-show æ¼”ç¤º</h4>
                    <button class="btn" @click="toggleVisible">
                        {{ isVisible ? 'éšè—å…ƒç´ ' : 'æ˜¾ç¤ºå…ƒç´ ' }}
                    </button>
                    <div v-show="isVisible" class="status info">
                        â„¹ï¸ è¿™æ˜¯é€šè¿‡ v-show æ§åˆ¶çš„å†…å®¹ (display: none/block)
                    </div>
                    <div class="code-block">
&lt;div v-show="isVisible"&gt;å†…å®¹&lt;/div&gt;
                    </div>
                </div>
            </div>
            
            <!-- 2. åˆ—è¡¨æ¸²æŸ“æŒ‡ä»¤ -->
            <div class="section">
                <h3>2. åˆ—è¡¨æ¸²æŸ“æŒ‡ä»¤ (v-for)</h3>
                
                <div class="demo-item">
                    <h4>æ•°ç»„æ¸²æŸ“</h4>
                    <button class="btn" @click="addItem">æ·»åŠ é¡¹ç›®</button>
                    <button class="btn btn-danger" @click="removeItem">åˆ é™¤é¡¹ç›®</button>
                    
                    <ul>
                        <li v-for="(item, index) in items" :key="item.id" 
                            style="padding: 5px; margin: 2px; background: #e3f2fd; border-radius: 3px;">
                            {{ index + 1 }}. {{ item.name }} (ID: {{ item.id }})
                        </li>
                    </ul>
                    
                    <div class="code-block">
&lt;li v-for="(item, index) in items" :key="item.id"&gt;
  {{ index + 1 }}. {{ item.name }}
&lt;/li&gt;
                    </div>
                </div>
                
                <div class="demo-item">
                    <h4>å¯¹è±¡æ¸²æŸ“</h4>
                    <div class="grid">
                        <div v-for="(value, key) in userInfo" :key="key" 
                             style="padding: 8px; background: #f3e5f5; border-radius: 3px;">
                            <strong>{{ key }}:</strong> {{ value }}
                        </div>
                    </div>
                    
                    <div class="code-block">
&lt;div v-for="(value, key) in userInfo" :key="key"&gt;
  &lt;strong&gt;{{ key }}:&lt;/strong&gt; {{ value }}
&lt;/div&gt;
                    </div>
                </div>
            </div>
            
            <!-- 3. äº‹ä»¶ç»‘å®šæŒ‡ä»¤ -->
            <div class="section">
                <h3>3. äº‹ä»¶ç»‘å®šæŒ‡ä»¤ (v-on / @)</h3>
                
                <div class="demo-item">
                    <h4>åŸºç¡€äº‹ä»¶ç»‘å®š</h4>
                    <button class="btn" @click="handleClick">ç‚¹å‡»æˆ‘</button>
                    <button class="btn" @dblclick="handleDoubleClick">åŒå‡»æˆ‘</button>
                    <div class="status info">{{ eventMessage }}</div>
                </div>
                
                <div class="demo-item">
                    <h4>äº‹ä»¶ä¿®é¥°ç¬¦æ¼”ç¤º</h4>
                    <form @submit.prevent="handleSubmit" style="margin: 10px 0;">
                        <input type="text" v-model="formData" placeholder="è¾“å…¥å†…å®¹" class="input-field">
                        <button type="submit" class="btn">æäº¤ (.prevent)</button>
                    </form>
                    
                    <div @click="parentClick" style="padding: 20px; background: #ffebee; border-radius: 4px; margin: 10px 0;">
                        çˆ¶çº§åŒºåŸŸ
                        <button class="btn" @click.stop="childClick">å­æŒ‰é’® (.stop)</button>
                    </div>
                    
                    <div class="code-block">
&lt;form @submit.prevent="handleSubmit"&gt;
&lt;button @click.stop="childClick"&gt;å­æŒ‰é’®&lt;/button&gt;
                    </div>
                </div>
            </div>
            
            <!-- 4. åŒå‘ç»‘å®šæŒ‡ä»¤ -->
            <div class="section">
                <h3>4. åŒå‘ç»‘å®šæŒ‡ä»¤ (v-model)</h3>
                
                <div class="demo-item">
                    <h4>ä¸åŒè¡¨å•å…ƒç´ çš„v-model</h4>
                    
                    <div style="margin: 10px 0;">
                        <label>æ–‡æœ¬è¾“å…¥: </label>
                        <input v-model="textInput" placeholder="è¾“å…¥æ–‡æœ¬" class="input-field">
                        <span class="highlight">å€¼: {{ textInput }}</span>
                    </div>
                    
                    <div style="margin: 10px 0;">
                        <label>å¤šè¡Œæ–‡æœ¬: </label>
                        <textarea v-model="textareaInput" rows="3" class="input-field" style="display: block; width: 300px;"></textarea>
                        <span class="highlight">å€¼: {{ textareaInput }}</span>
                    </div>
                    
                    <div style="margin: 10px 0;">
                        <label>å¤é€‰æ¡†: </label>
                        <input type="checkbox" v-model="checkboxValue"> 
                        <span class="highlight">{{ checkboxValue ? 'å·²é€‰ä¸­' : 'æœªé€‰ä¸­' }}</span>
                    </div>
                    
                    <div style="margin: 10px 0;">
                        <label>å•é€‰æ¡†: </label>
                        <input type="radio" v-model="radioValue" value="option1"> é€‰é¡¹1
                        <input type="radio" v-model="radioValue" value="option2"> é€‰é¡¹2
                        <span class="highlight">é€‰æ‹©: {{ radioValue }}</span>
                    </div>
                    
                    <div style="margin: 10px 0;">
                        <label>ä¸‹æ‹‰é€‰æ‹©: </label>
                        <select v-model="selectValue" class="input-field">
                            <option value="">è¯·é€‰æ‹©</option>
                            <option value="vue">Vue.js</option>
                            <option value="react">React</option>
                            <option value="angular">Angular</option>
                        </select>
                        <span class="highlight">é€‰æ‹©: {{ selectValue }}</span>
                    </div>
                </div>
                
                <div class="demo-item">
                    <h4>v-model ä¿®é¥°ç¬¦</h4>
                    
                    <div style="margin: 10px 0;">
                        <label>.lazy: </label>
                        <input v-model.lazy="lazyInput" placeholder="å¤±ç„¦æ—¶æ›´æ–°" class="input-field">
                        <span class="highlight">å€¼: {{ lazyInput }}</span>
                    </div>
                    
                    <div style="margin: 10px 0;">
                        <label>.number: </label>
                        <input v-model.number="numberInput" type="number" placeholder="è‡ªåŠ¨è½¬æ•°å­—" class="input-field">
                        <span class="highlight">å€¼: {{ numberInput }} (ç±»å‹: {{ typeof numberInput }})</span>
                    </div>
                    
                    <div style="margin: 10px 0;">
                        <label>.trim: </label>
                        <input v-model.trim="trimInput" placeholder="è‡ªåŠ¨å»é™¤é¦–å°¾ç©ºæ ¼" class="input-field">
                        <span class="highlight">å€¼: "{{ trimInput }}"</span>
                    </div>
                </div>
            </div>
            
            <!-- 5. è‡ªå®šä¹‰æŒ‡ä»¤æ¼”ç¤º -->
            <div class="section">
                <h3>5. è‡ªå®šä¹‰æŒ‡ä»¤æ¼”ç¤º</h3>
                
                <div class="demo-item">
                    <h4>v-focus èšç„¦æŒ‡ä»¤</h4>
                    <button class="btn" @click="showFocusInput = !showFocusInput">
                        {{ showFocusInput ? 'éšè—' : 'æ˜¾ç¤º' }}è¾“å…¥æ¡†
                    </button>
                    <div v-if="showFocusInput" style="margin: 10px 0;">
                        <input v-focus placeholder="è‡ªåŠ¨èšç„¦çš„è¾“å…¥æ¡†" class="input-field">
                    </div>
                    
                    <div class="code-block">
// è‡ªå®šä¹‰æŒ‡ä»¤å®šä¹‰
app.directive('focus', {
  mounted(el) {
    el.focus()
  }
})

// ä½¿ç”¨
&lt;input v-focus placeholder="è‡ªåŠ¨èšç„¦" /&gt;
                    </div>
                </div>
                
                <div class="demo-item">
                    <h4>v-loading åŠ è½½æŒ‡ä»¤</h4>
                    <button class="btn" @click="toggleLoading">
                        {{ isLoading ? 'åœæ­¢åŠ è½½' : 'å¼€å§‹åŠ è½½' }}
                    </button>
                    
                    <div v-loading="isLoading" class="loading-container">
                        <div v-if="!isLoading">
                            ğŸ¯ è¿™é‡Œæ˜¯å†…å®¹åŒºåŸŸï¼Œç‚¹å‡»ä¸Šæ–¹æŒ‰é’®æŸ¥çœ‹åŠ è½½æ•ˆæœ
                        </div>
                    </div>
                    
                    <div class="code-block">
// v-loading æŒ‡ä»¤ä½¿ç”¨
&lt;div v-loading="isLoading"&gt;å†…å®¹åŒºåŸŸ&lt;/div&gt;
                    </div>
                </div>
                
                <div class="demo-item">
                    <h4>v-permission æƒé™æŒ‡ä»¤</h4>
                    <div style="margin: 10px 0;">
                        å½“å‰æƒé™: 
                        <select v-model="currentPermission" class="input-field">
                            <option value="user">æ™®é€šç”¨æˆ·</option>
                            <option value="admin">ç®¡ç†å‘˜</option>
                            <option value="guest">è®¿å®¢</option>
                        </select>
                    </div>
                    
                    <div v-permission:admin="currentPermission" class="permission-demo">
                        ğŸ” è¿™æ˜¯ç®¡ç†å‘˜ä¸“å±å†…å®¹ (éœ€è¦adminæƒé™)
                    </div>
                    
                    <div v-permission:user="currentPermission" class="permission-demo">
                        ğŸ‘¤ è¿™æ˜¯ç”¨æˆ·å¯è§å†…å®¹ (éœ€è¦useræˆ–adminæƒé™)
                    </div>
                    
                    <div class="code-block">
// v-permission æŒ‡ä»¤ä½¿ç”¨
&lt;div v-permission:admin="userRole"&gt;ç®¡ç†å‘˜å†…å®¹&lt;/div&gt;
&lt;div v-permission:user="userRole"&gt;ç”¨æˆ·å†…å®¹&lt;/div&gt;
                    </div>
                </div>
                
                <div class="demo-item">
                    <h4>v-clickoutside ç‚¹å‡»å¤–éƒ¨æŒ‡ä»¤</h4>
                    <button class="btn" @click="showDropdown = !showDropdown">
                        {{ showDropdown ? 'å…³é—­' : 'æ‰“å¼€' }}ä¸‹æ‹‰èœå•
                    </button>
                    
                    <div v-if="showDropdown" 
                         v-clickoutside="() => showDropdown = false"
                         style="position: relative; display: inline-block; margin-left: 10px;">
                        <div style="position: absolute; top: 0; left: 0; background: white; border: 1px solid #ddd; border-radius: 4px; padding: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); z-index: 100;">
                            <div style="padding: 5px; cursor: pointer;" @click="handleMenuClick('option1')">é€‰é¡¹ 1</div>
                            <div style="padding: 5px; cursor: pointer;" @click="handleMenuClick('option2')">é€‰é¡¹ 2</div>
                            <div style="padding: 5px; cursor: pointer;" @click="handleMenuClick('option3')">é€‰é¡¹ 3</div>
                        </div>
                    </div>
                    
                    <div v-if="selectedOption" class="status success">
                        é€‰æ‹©äº†: {{ selectedOption }}
                    </div>
                </div>
            </div>
            
            <!-- 6. æŒ‡ä»¤ä¿®é¥°ç¬¦å’Œå‚æ•° -->
            <div class="section">
                <h3>6. æŒ‡ä»¤ä¿®é¥°ç¬¦å’Œå‚æ•°æ¼”ç¤º</h3>
                
                <div class="demo-item">
                    <h4>åŠ¨æ€å‚æ•°</h4>
                    <div style="margin: 10px 0;">
                        <label>äº‹ä»¶ç±»å‹: </label>
                        <select v-model="eventType" class="input-field">
                            <option value="click">click</option>
                            <option value="mouseenter">mouseenter</option>
                            <option value="mouseleave">mouseleave</option>
                        </select>
                    </div>
                    
                    <button class="btn" @[eventType]="handleDynamicEvent">
                        è§¦å‘ {{ eventType }} äº‹ä»¶
                    </button>
                    
                    <div class="status info">{{ dynamicEventMessage }}</div>
                    
                    <div class="code-block">
&lt;button @[eventType]="handleDynamicEvent"&gt;
  è§¦å‘ {{ eventType }} äº‹ä»¶
&lt;/button&gt;
                    </div>
                </div>
            </div>
            
            <!-- 7. æ€§èƒ½å¯¹æ¯”æ¼”ç¤º -->
            <div class="section">
                <h3>7. æ€§èƒ½å¯¹æ¯”æ¼”ç¤º</h3>
                
                <div class="demo-item">
                    <h4>v-if vs v-show æ€§èƒ½å¯¹æ¯”</h4>
                    <div class="grid">
                        <div>
                            <button class="btn" @click="performanceTest('v-if')">v-if æ€§èƒ½æµ‹è¯•</button>
                            <div class="status info">v-if åˆ‡æ¢æ¬¡æ•°: {{ vIfCount }}</div>
                        </div>
                        <div>
                            <button class="btn" @click="performanceTest('v-show')">v-show æ€§èƒ½æµ‹è¯•</button>
                            <div class="status info">v-show åˆ‡æ¢æ¬¡æ•°: {{ vShowCount }}</div>
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: 20px; margin: 20px 0;">
                        <div style="flex: 1;">
                            <div v-if="testVisible" style="padding: 20px; background: #e8f5e8;">
                                v-if æµ‹è¯•å†…å®¹ (DOM åˆ›å»º/é”€æ¯)
                            </div>
                        </div>
                        <div style="flex: 1;">
                            <div v-show="testVisible" style="padding: 20px; background: #fff3cd;">
                                v-show æµ‹è¯•å†…å®¹ (display åˆ‡æ¢)
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const { createApp } = Vue

        createApp({
            data() {
                return {
                    // æ¡ä»¶æ¸²æŸ“
                    showContent: true,
                    isVisible: true,
                    
                    // åˆ—è¡¨æ¸²æŸ“
                    items: [
                        { id: 1, name: 'Vue.js' },
                        { id: 2, name: 'React' },
                        { id: 3, name: 'Angular' }
                    ],
                    userInfo: {
                        name: 'å¼ ä¸‰',
                        age: 25,
                        email: 'zhangsan@example.com',
                        role: 'å‰ç«¯å·¥ç¨‹å¸ˆ'
                    },
                    
                    // äº‹ä»¶ç»‘å®š
                    eventMessage: 'ç­‰å¾…äº‹ä»¶è§¦å‘...',
                    formData: '',
                    
                    // åŒå‘ç»‘å®š
                    textInput: 'Hello Vue3',
                    textareaInput: '',
                    checkboxValue: false,
                    radioValue: '',
                    selectValue: '',
                    lazyInput: '',
                    numberInput: 0,
                    trimInput: '',
                    
                    // è‡ªå®šä¹‰æŒ‡ä»¤
                    showFocusInput: false,
                    isLoading: false,
                    currentPermission: 'user',
                    showDropdown: false,
                    selectedOption: '',
                    
                    // åŠ¨æ€å‚æ•°
                    eventType: 'click',
                    dynamicEventMessage: 'ç­‰å¾…åŠ¨æ€äº‹ä»¶...',
                    
                    // æ€§èƒ½æµ‹è¯•
                    testVisible: true,
                    vIfCount: 0,
                    vShowCount: 0
                }
            },
            
            methods: {
                toggleShow() {
                    this.showContent = !this.showContent
                },
                
                toggleVisible() {
                    this.isVisible = !this.isVisible
                },
                
                addItem() {
                    const id = this.items.length + 1
                    this.items.push({
                        id: Date.now(),
                        name: `æ–°é¡¹ç›® ${id}`
                    })
                },
                
                removeItem() {
                    if (this.items.length > 0) {
                        this.items.pop()
                    }
                },
                
                handleClick() {
                    this.eventMessage = `å•å‡»äº‹ä»¶è§¦å‘ - ${new Date().toLocaleTimeString()}`
                },
                
                handleDoubleClick() {
                    this.eventMessage = `åŒå‡»äº‹ä»¶è§¦å‘ - ${new Date().toLocaleTimeString()}`
                },
                
                handleSubmit() {
                    this.eventMessage = `è¡¨å•æäº¤ï¼Œæ•°æ®: ${this.formData}`
                },
                
                parentClick() {
                    this.eventMessage = 'çˆ¶çº§åŒºåŸŸè¢«ç‚¹å‡»'
                },
                
                childClick() {
                    this.eventMessage = 'å­æŒ‰é’®è¢«ç‚¹å‡»ï¼ˆé˜»æ­¢å†’æ³¡ï¼‰'
                },
                
                toggleLoading() {
                    this.isLoading = !this.isLoading
                },
                
                handleMenuClick(option) {
                    this.selectedOption = option
                    this.showDropdown = false
                },
                
                handleDynamicEvent() {
                    this.dynamicEventMessage = `${this.eventType} äº‹ä»¶è¢«è§¦å‘ - ${new Date().toLocaleTimeString()}`
                },
                
                performanceTest(type) {
                    const iterations = 100
                    const startTime = performance.now()
                    
                    if (type === 'v-if') {
                        for (let i = 0; i < iterations; i++) {
                            this.testVisible = !this.testVisible
                            this.vIfCount++
                        }
                    } else {
                        for (let i = 0; i < iterations; i++) {
                            this.testVisible = !this.testVisible
                            this.vShowCount++
                        }
                    }
                    
                    const endTime = performance.now()
                    console.log(`${type} æ€§èƒ½æµ‹è¯•: ${iterations} æ¬¡åˆ‡æ¢è€—æ—¶ ${(endTime - startTime).toFixed(2)}ms`)
                }
            }
        })
        
        // è‡ªå®šä¹‰æŒ‡ä»¤å®šä¹‰
        .directive('focus', {
            mounted(el) {
                el.focus()
            }
        })
        
        .directive('loading', {
            mounted(el, binding) {
                updateLoading(el, binding)
            },
            updated(el, binding) {
                updateLoading(el, binding)
            }
        })
        
        .directive('permission', {
            mounted(el, binding) {
                checkPermissionAndUpdate(el, binding)
            },
            updated(el, binding) {
                checkPermissionAndUpdate(el, binding)
            }
        })
        
        .directive('clickoutside', {
            mounted(el, binding) {
                el._clickOutsideHandler = (event) => {
                    if (!el.contains(event.target)) {
                        binding.value()
                    }
                }
                document.addEventListener('click', el._clickOutsideHandler)
            },
            unmounted(el) {
                document.removeEventListener('click', el._clickOutsideHandler)
            }
        })
        
        .mount('#app')

        // è¾…åŠ©å‡½æ•°
        function updateLoading(el, binding) {
            if (binding.value) {
                showLoading(el)
            } else {
                hideLoading(el)
            }
        }

        function showLoading(el) {
            if (el._loadingMask) return
            
            const mask = document.createElement('div')
            mask.className = 'loading-mask'
            mask.innerHTML = `
                <div class="loading-spinner"></div>
                <div class="loading-text">åŠ è½½ä¸­...</div>
            `
            
            el.style.position = 'relative'
            el.appendChild(mask)
            el._loadingMask = mask
        }

        function hideLoading(el) {
            if (el._loadingMask) {
                el._loadingMask.remove()
                el._loadingMask = null
            }
        }

        function checkPermissionAndUpdate(el, binding) {
            const requiredPermission = binding.arg
            const userPermission = binding.value
            
            const hasPermission = checkUserPermission(userPermission, requiredPermission)
            
            if (!hasPermission) {
                el.style.display = 'none'
            } else {
                el.style.display = ''
            }
        }

        function checkUserPermission(userRole, requiredPermission) {
            const permissions = {
                admin: ['admin', 'user', 'guest'],
                user: ['user', 'guest'],
                guest: ['guest']
            }
            
            return permissions[userRole]?.includes(requiredPermission) || false
        }
    </script>
</body>
</html> 